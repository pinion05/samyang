# ì‚¼ì–‘ë†ì—…í”Œë«í¼ í•™ìŠµìš© í”„ë¡œì íŠ¸ ì˜¤ë¥˜ ë¶„ì„ ë³´ê³ ì„œ

## 1. ê°œìš”
ë³¸ ë³´ê³ ì„œëŠ” Spring Boot í•™ìŠµìš© í† ì´ í”„ë¡œì íŠ¸ì˜ ê¸°ìˆ ì  ì˜¤ë¥˜ì™€ êµ¬ì¡°ì  ë¬¸ì œì ì„ ë¶„ì„í•œ ê²ƒì…ë‹ˆë‹¤. ë³´ì•ˆ ê´€ë ¨ ì‚¬í•­ì€ í•™ìŠµ ëª©ì ì— ë§ì§€ ì•Šìœ¼ë¯€ë¡œ ì œì™¸í•˜ì˜€ìŠµë‹ˆë‹¤.

## 2. í”„ë¡œì íŠ¸ í˜„ì¬ ìƒíƒœ
- **ê¸°ìˆ ì  ì˜¤ë¥˜**: 12ê°œ
- **êµ¬ì¡°ì  ë¬¸ì œ**: 8ê°œ
- **ëˆ„ë½ëœ ê¸°ëŠ¥**: 5ê°œ

## 3. í•µì‹¬ ê¸°ìˆ ì  ë¬¸ì œì 

### 3.1 ë°ì´í„°ë² ì´ìŠ¤ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë§¤í•‘ ë¶ˆì¼ì¹˜

#### âŒ User í…Œì´ë¸” êµ¬ì¡° ë¬¸ì œ
**ì‹¤ì œ DB ìŠ¤í‚¤ë§ˆ**:
```sql
CREATE TABLE `User` (
  `UserID` int NOT NULL AUTO_INCREMENT,
  `Name` varchar(255),
  `Email` varchar(255),
  `Password` varchar(255),
  `PhoneNumber` varchar(20),
  `Address` varchar(255),
  `IsAdmin` tinyint(1),
  `CreatedAt` datetime
)
```

**ë¬¸ì œì **:
1. **UserMapper.xmlì˜ í˜¼ì¬ëœ ì¿¼ë¦¬**
   ```xml
   <!-- êµ¬ë²„ì „ ì¿¼ë¦¬ (ì •ìƒ ì‘ë™) -->
   SELECT PhoneNumber as phoneNumber, IsAdmin as isAdmin ...

   <!-- ì‹ ë²„ì „ ì¿¼ë¦¬ (ì˜¤ë¥˜ ë°œìƒ) -->
   SELECT LoginID as loginId, Phone as phone, Role as role ...
   <!-- LoginID, Phone, Role ì»¬ëŸ¼ì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ì§€ ì•ŠìŒ -->
   ```

2. **UserDTOì˜ í•„ë“œ í˜¼ë€**
   ```java
   private String id;
   private Integer userId;
   private String username;
   // loginId í•„ë“œ ì—†ìŒ - í•˜ì§€ë§Œ ì½”ë“œì—ì„œëŠ” ì‚¬ìš© ì‹œë„
   ```

**ì˜í–¥**: ë¡œê·¸ì¸ ê¸°ëŠ¥ ì‘ë™ ë¶ˆê°€, ì‚¬ìš©ì ê´€ë¦¬ ì˜¤ë¥˜

#### âŒ PaymentMethod í…Œì´ë¸” ë§¤í•‘ ì˜¤ë¥˜
**DB ì»¬ëŸ¼**: `CVC`
**DTO/Mapper**: `cvv` ì‚¬ìš©

**ì¶”ê°€ë¡œ ì—†ëŠ” ì»¬ëŸ¼ ì°¸ì¡°**:
- `paymentType`
- `cardHolderName` 
- `billingAddress`

### 3.2 ì™¸ë˜í‚¤ ì°¸ì¡° ì˜¤ë¥˜

#### âŒ Comment í…Œì´ë¸”
- DB: `PostID` ì»¬ëŸ¼ ì¡´ì¬í•˜ë‚˜ Post í…Œì´ë¸” ì—†ìŒ
- DTO: `relatedId`, `relatedType` ì‚¬ìš©
- **ë¬¸ì œ**: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ ë¶ˆì¼ì¹˜

#### âŒ Review í…Œì´ë¸”
- DB: `OrderItemID` ì°¸ì¡°í•˜ë‚˜ OrderItem í…Œì´ë¸” ì—†ìŒ
- DTO: `productId` ì‚¬ìš©í•˜ë‚˜ Product í…Œì´ë¸”ë„ ì—†ìŒ
- **ë¬¸ì œ**: ì „ì²´ ë¦¬ë·° ê¸°ëŠ¥ ì‘ë™ ë¶ˆê°€

### 3.3 MyBatis ì„¤ì • ì˜¤ë¥˜

#### âŒ resultType íŒ¨í‚¤ì§€ ê²½ë¡œ ì˜¤ë¥˜
```xml
<!-- ì˜ëª»ëœ ê²½ë¡œ -->
<select id="getLogin" resultType="com.farm404.samyang.UserDTO.UserDTO">

<!-- ì˜¬ë°”ë¥¸ ê²½ë¡œ -->
<select id="getLogin" resultType="com.farm404.samyang.dto.UserDTO">
```

#### âŒ ì¤‘ë³µ ë©”ì„œë“œ ì •ì˜
- `insertUser`ì™€ `registerUser` ë™ì¼ ê¸°ëŠ¥
- `getUserById`ì™€ `selectUserById` ë™ì¼ ê¸°ëŠ¥

### 3.4 Spring Boot ì •ì  ë¦¬ì†ŒìŠ¤ ì„¤ì • ë¬¸ì œ

#### âŒ CSS/JS íŒŒì¼ ì ‘ê·¼ ë¶ˆê°€
**í˜„ì¬ êµ¬ì¡°**:
```
src/main/webapp/
â”œâ”€â”€ css/style.css
â”œâ”€â”€ js/main.js
â””â”€â”€ views/*.jsp
```

**ë¬¸ì œ**: Spring BootëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `src/main/resources/static`ì„ ì •ì  ë¦¬ì†ŒìŠ¤ ê²½ë¡œë¡œ ì¸ì‹

**í•´ê²° ë°©ë²•**:
1. íŒŒì¼ì„ `src/main/resources/static`ìœ¼ë¡œ ì´ë™
2. ë˜ëŠ” WebConfigì— ì„¤ì • ì¶”ê°€:
```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/css/**").addResourceLocations("/css/");
        registry.addResourceHandler("/js/**").addResourceLocations("/js/");
    }
}
```

## 4. ì•„í‚¤í…ì²˜ ë° ì„¤ê³„ ë¬¸ì œ

### 4.1 ë ˆì´ì–´ ì±…ì„ ë¶„ë¦¬ ë¯¸í¡

#### âš ï¸ DTOì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í¬í•¨
```java
// ReviewDTO.java
public String getStarRating() {
    StringBuilder stars = new StringBuilder();
    for (int i = 0; i < 5; i++) {
        if (i < rating) {
            stars.append("â˜…");
        } else {
            stars.append("â˜†");
        }
    }
    return stars.toString();
}
```
**í•™ìŠµ í¬ì¸íŠ¸**: DTOëŠ” ë°ì´í„° ì „ë‹¬ìš©, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ Service ë ˆì´ì–´ì—

### 4.2 íŠ¸ëœì­ì…˜ ê´€ë¦¬ ëˆ„ë½

#### âš ï¸ Service ë ˆì´ì–´ì— @Transactional ì—†ìŒ
```java
@Service
// @Transactional ëˆ„ë½
public class UserService {
    public boolean registerUser(UserDTO user) {
        return userMapper.insertUser(user) > 0;
    }
}
```
**í•™ìŠµ í¬ì¸íŠ¸**: ë°ì´í„° ë³€ê²½ ì‘ì—…ì—ëŠ” íŠ¸ëœì­ì…˜ ê´€ë¦¬ í•„ìš”

### 4.3 ì˜ˆì™¸ ì²˜ë¦¬ íŒ¨í„´ ë¶€ì¬

#### âš ï¸ ëª¨ë“  ì˜ˆì™¸ë¥¼ Exceptionìœ¼ë¡œ ì²˜ë¦¬
```java
try {
    // ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
} catch (Exception e) {
    model.addAttribute("errorMessage", e.getMessage());
    return "error";
}
```
**í•™ìŠµ í¬ì¸íŠ¸**: êµ¬ì²´ì ì¸ ì˜ˆì™¸ íƒ€ì…ë³„ ì²˜ë¦¬ í•„ìš”

## 5. ë°ì´í„° íƒ€ì… ì¼ê´€ì„± ë¬¸ì œ

### 5.1 ë‚ ì§œ íƒ€ì… í˜¼ìš©
- FarmingDiaryDTO: `LocalDate`, `LocalDateTime` í˜¼ìš©
- ReviewDTO: `LocalDateTime` ì‚¬ìš©
- CommentDTO: `java.util.Date` ì‚¬ìš©

**ê¶Œì¥ì‚¬í•­**: Java 8+ ì—ì„œëŠ” `LocalDateTime` í†µì¼ ì‚¬ìš©

### 5.2 ID í•„ë“œëª… í˜¼ë€
- UserDTOì— `id`ì™€ `userId` ë™ì‹œ ì¡´ì¬
- ì¼ë¶€ ì½”ë“œëŠ” `id` ì‚¬ìš©, ì¼ë¶€ëŠ” `userId` ì‚¬ìš©

## 6. ëˆ„ë½ëœ ê¸°ëŠ¥ êµ¬í˜„

### 6.1 í•„ìˆ˜ í…Œì´ë¸” ë¶€ì¬
í•™ìŠµ í”„ë¡œì íŠ¸ì§€ë§Œ ì „ììƒê±°ë˜ í”Œë«í¼ì„ í‘œë°©í•œë‹¤ë©´ í•„ìš”í•œ í…Œì´ë¸”:
- Product (ìƒí’ˆ)
- Order/OrderItem (ì£¼ë¬¸)
- Cart (ì¥ë°”êµ¬ë‹ˆ)
- Post (ê²Œì‹œíŒ)

### 6.2 CRUD ê¸°ëŠ¥ ë¯¸ì™„ì„±
- ì¼ë¶€ Controller ë©”ì„œë“œë§Œ êµ¬í˜„
- View í˜ì´ì§€ì™€ Controller ë§¤í•‘ ë¶ˆì¼ì¹˜

## 7. ê°œì„  ë°©ì•ˆ (í•™ìŠµ ê´€ì )

### 7.1 ì¦‰ì‹œ ìˆ˜ì • ê°€ëŠ¥í•œ ë¶€ë¶„

#### 1. UserMapper.xml ì •ë¦¬
- ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¬ëŸ¼ ì°¸ì¡° ì œê±°
- resultType ê²½ë¡œ ìˆ˜ì •
- ì¤‘ë³µ ë©”ì„œë“œ ì œê±°

#### 2. UserDTO í†µì¼
```java
public class UserDTO {
    private Integer userId;  // id í•„ë“œ ì œê±°í•˜ê³  userIdë¡œ í†µì¼
    private String email;    // loginId ëŒ€ì‹  emailë¡œ ë¡œê·¸ì¸
    private String name;
    private String password;
    private String phone;    // phoneNumberë¡œ í†µì¼
    private Boolean isAdmin; // role ëŒ€ì‹  isAdmin ì‚¬ìš©
    private LocalDateTime createdAt;
    
    // Getters and Setters
}
```

#### 3. ì •ì  ë¦¬ì†ŒìŠ¤ ê²½ë¡œ ìˆ˜ì •
- CSS/JS íŒŒì¼ì„ `src/main/resources/static`ìœ¼ë¡œ ì´ë™

#### 4. ë°ì´í„° íƒ€ì… í†µì¼
- ëª¨ë“  ë‚ ì§œ í•„ë“œë¥¼ `LocalDateTime`ìœ¼ë¡œ í†µì¼

### 7.2 ë‹¨ê³„ì  ê°œì„  ê³„íš

#### 1ë‹¨ê³„: ê¸°ë³¸ ê¸°ëŠ¥ ì •ìƒí™” (1ì£¼)
1. DB ìŠ¤í‚¤ë§ˆì™€ Mapper XML ë™ê¸°í™”
2. DTO í•„ë“œëª… í†µì¼
3. ì •ì  ë¦¬ì†ŒìŠ¤ ê²½ë¡œ ì„¤ì •
4. ê¸°ì¡´ CRUD ê¸°ëŠ¥ ì •ìƒ ì‘ë™ í™•ì¸

#### 2ë‹¨ê³„: Spring Boot í•µì‹¬ ê¸°ëŠ¥ í•™ìŠµ (2-3ì£¼)
1. **íŠ¸ëœì­ì…˜ ê´€ë¦¬ ì¶”ê°€**
   ```java
   @Service
   @Transactional
   public class UserService {
       // ì„œë¹„ìŠ¤ ë©”ì„œë“œë“¤
   }
   ```

2. **ê²€ì¦ ë¡œì§ êµ¬í˜„**
   ```java
   @PostMapping("/register")
   public String register(@Valid @ModelAttribute UserDTO user, 
                         BindingResult result) {
       if (result.hasErrors()) {
           return "user/register";
       }
       // ì €ì¥ ë¡œì§
   }
   ```

3. **ì˜ˆì™¸ ì²˜ë¦¬ ê°œì„ **
   ```java
   @ExceptionHandler(DataAccessException.class)
   public String handleDatabaseError(DataAccessException e, Model model) {
       model.addAttribute("errorMessage", "ë°ì´í„°ë² ì´ìŠ¤ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
       return "error";
   }
   ```

#### 3ë‹¨ê³„: ì¶”ê°€ ê¸°ëŠ¥ êµ¬í˜„ (1ê°œì›”)
1. ëˆ„ë½ëœ í…Œì´ë¸” ìƒì„± ë° ê¸°ëŠ¥ êµ¬í˜„
2. RESTful API íŒ¨í„´ ì ìš©
3. í˜ì´ì§• ì²˜ë¦¬ êµ¬í˜„
4. íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥

## 8. í•™ìŠµ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì™„ë£Œëœ í•™ìŠµ ìš”ì†Œ âœ…
- Spring Boot í”„ë¡œì íŠ¸ êµ¬ì¡°
- MVC íŒ¨í„´ ê¸°ë³¸ êµ¬í˜„
- MyBatis ì—°ë™
- JSP ë·° í…œí”Œë¦¿

### ì¶”ê°€ í•™ìŠµ í•„ìš” ìš”ì†Œ ğŸ“š
- [ ] íŠ¸ëœì­ì…˜ ê´€ë¦¬ (@Transactional)
- [ ] ì˜ˆì™¸ ì²˜ë¦¬ ì „ëµ
- [ ] RESTful API ì„¤ê³„
- [ ] ìœ íš¨ì„± ê²€ì¦ (Bean Validation)
- [ ] í˜ì´ì§• ë° ì •ë ¬
- [ ] íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ
- [ ] ì„¸ì…˜ ê´€ë¦¬
- [ ] ì¸í„°ì…‰í„° í™œìš©

## 9. ì„±ëŠ¥ ê°œì„  ì œì•ˆ

### 9.1 N+1 ì¿¼ë¦¬ ë¬¸ì œ í•´ê²°
í˜„ì¬ Review, Commentì—ì„œ userNameì„ ê°œë³„ ì¡°íšŒí•˜ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.

**ê°œì„  ë°©ë²•**: JOIN ì¿¼ë¦¬ ì‚¬ìš©
```xml
<select id="selectReviewsWithUser" resultType="ReviewDTO">
    SELECT r.*, u.Name as userName
    FROM Review r
    JOIN User u ON r.UserID = u.UserID
</select>
```

### 9.2 ìºì‹± ì „ëµ ë„ì…
ë°˜ë³µì ìœ¼ë¡œ ì¡°íšŒë˜ëŠ” ë°ì´í„°ì— ëŒ€í•œ ìºì‹± ì ìš©ì„ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 10. ê²°ë¡ 

ì´ í”„ë¡œì íŠ¸ëŠ” Spring Boot í•™ìŠµìš©ìœ¼ë¡œ ê¸°ë³¸ì ì¸ êµ¬ì¡°ëŠ” ê°–ì¶”ì—ˆìœ¼ë‚˜, ë°ì´í„°ë² ì´ìŠ¤ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°„ì˜ ë§¤í•‘ ë¶ˆì¼ì¹˜ê°€ ê°€ì¥ í° ë¬¸ì œì…ë‹ˆë‹¤.

**ìš°ì„  í•´ê²° ê³¼ì œ**:
1. DB ìŠ¤í‚¤ë§ˆì™€ Mapper XML ë™ê¸°í™”
2. DTO í•„ë“œëª… í†µì¼
3. ì •ì  ë¦¬ì†ŒìŠ¤ ê²½ë¡œ ì„¤ì •

ì´ëŸ¬í•œ ê¸°ë³¸ì ì¸ ë¬¸ì œë¥¼ í•´ê²°í•œ í›„, RESTful API, íŠ¸ëœì­ì…˜ ê´€ë¦¬, ì˜ˆì™¸ ì²˜ë¦¬ ë“±ì˜ Spring Boot í•µì‹¬ ê¸°ëŠ¥ì„ ë‹¨ê³„ì ìœ¼ë¡œ í•™ìŠµí•˜ë©° êµ¬í˜„í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.

í•™ìŠµ í”„ë¡œì íŠ¸ì˜ ëª©ì ì— ë§ê²Œ ë³´ì•ˆë³´ë‹¤ëŠ” Spring Bootì˜ í•µì‹¬ ê¸°ëŠ¥ ì´í•´ì™€ êµ¬í˜„ì— ì§‘ì¤‘í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.